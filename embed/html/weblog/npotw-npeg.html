<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Nim Package of the Week: npeg</title>
        <link rel="shortcut icon" type="image/icon" href="theme/images/favicon.ico"/>
        <link rel="stylesheet" href="/style.css">
        <link rel="stylesheet" href="./theme/css/pygments.css" />
    </head>

    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="/">homepage</a></li>
                    <li><a href="/weblog">weblog</a></li>
                    <li><a href="/note">notes</a></li>
                    <li><a href="/recipe">recipes</a></li>
                    <li><a href="/project">projects</a></li>
                    <li><a href="/cheatsheet">cheatsheet</a></li>
                    <li><a href="/demo">demos</a></li>
                </ul>
            </nav>
            <h1><a href="./">supakeen's weblog </a></h1>
        </header>
<section>
    <article>
        <h1>Nim Package of the Week: npeg</h1>
        <p><a class="reference external" href="https://github.com/zevv/npeg">npeg</a> is a package for <a class="reference external" href="https://nim-lang.org/">Nim</a> implementing <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEGs</a> or Parser Expression Grammars.
This allows you to express complex parsing operations in a semi-standardized
and concise manner while offering more flexibility than Regular Expressions
have.</p>
<p>Examples speak more than words, here is an <tt class="docutils literal">npeg</tt> example from its README:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">npeg</span><span class="p">,</span> <span class="n">strutils</span><span class="p">,</span> <span class="n">tables</span>

<span class="k">type</span> <span class="n">Dict</span> <span class="o">=</span> <span class="n">Table</span><span class="o">[</span><span class="nb">string</span><span class="p">,</span> <span class="nb">int</span><span class="o">]</span>

<span class="k">let</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">peg</span><span class="p">(</span><span class="s">&quot;pairs&quot;</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
  <span class="n">pairs</span> <span class="o">&lt;-</span> <span class="n">pair</span> <span class="o">*</span> <span class="o">*</span><span class="p">(</span><span class="sc">&#39;,&#39;</span> <span class="o">*</span> <span class="n">pair</span><span class="p">)</span> <span class="o">*</span> <span class="o">!</span><span class="mi">1</span>
  <span class="n">word</span> <span class="o">&lt;-</span> <span class="o">+</span><span class="n">Alpha</span>
  <span class="n">number</span> <span class="o">&lt;-</span> <span class="o">+</span><span class="n">Digit</span>
  <span class="n">pair</span> <span class="o">&lt;-</span> <span class="o">&gt;</span><span class="n">word</span> <span class="o">*</span> <span class="sc">&#39;=&#39;</span> <span class="o">*</span> <span class="o">&gt;</span><span class="n">number</span><span class="p">:</span>
        <span class="n">d</span><span class="o">[$</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">parseInt</span><span class="p">(</span><span class="o">$</span><span class="mi">2</span><span class="p">)</span>

<span class="kd">var</span> <span class="n">words</span><span class="p">:</span> <span class="n">Table</span><span class="o">[</span><span class="nb">string</span><span class="p">,</span> <span class="nb">int</span><span class="o">]</span>
<span class="n">doAssert</span> <span class="n">parser</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s">&quot;one=1,two=2,three=3,four=4&quot;</span><span class="p">,</span> <span class="n">words</span><span class="p">).</span><span class="n">ok</span>
<span class="n">echo</span> <span class="n">words</span>
</pre></div>
<p>The above parses the string <tt class="docutils literal">one=1,two=2,three=3,four=4</tt> into a <tt class="docutils literal">Dict</tt> by
key and value.</p>
<p>Aside from providing nice macros and syntax to define PEGs the <tt class="docutils literal">npeg</tt> package
also contains one of the most complete READMEs dense with information on how
to write and handle PEGs for parsing.</p>
<p>The Nim Package of the Week is a series on Nim packages that make up the
ecosystem where a new article appears weekly on a library that you should
know about.</p>

    </article>
</section>
        <footer>
            <p>Go back <a href="/">home</a> or find me on <a href="https://twitter.com/supakeen">Twitter</a> if I got something wrong.</p>
        </footer>
    </body>
</html>